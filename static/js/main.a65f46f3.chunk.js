(this["webpackJsonpspotify-stats"]=this["webpackJsonpspotify-stats"]||[]).push([[0],{150:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},247:function(e,t,n){},413:function(e,t,n){"use strict";n.r(t);var s,a,i,o,r,c,l=n(0),d=n.n(l),u=n(64),p=n.n(u),h=(n(239),n(240),n(37)),g=n(17),m=n(197),j=n(198),f=n(199),b=n(229),x=(n(241),n.p+"static/media/spotify_logo.21441016.png"),y=n(2),O=function(e){return Object(y.jsx)("div",{style:{color:"#fff",width:"100%",background:"linear-gradient(#000000 0%, #0f6c30 100%)",height:"100vh",margin:"auto",position:"absolute"},children:Object(y.jsxs)("div",{style:{position:"relative",top:"50%",transform:"translateY(-50%)"},children:[Object(y.jsxs)("div",{style:{width:"100%",alignItems:"center",justifyContent:"center",textAlign:"center"},children:[Object(y.jsx)("h1",{style:{fontSize:"100px",color:"white",display:"inline"},children:"Spotify"}),Object(y.jsx)("h1",{style:{fontSize:"100px",color:"#1DB954",display:"inline"},children:"Stats"})]}),Object(y.jsx)("div",{style:{display:"flex",justifyContent:"center",paddingTop:"50px"},children:Object(y.jsxs)("button",{className:"button",onClick:e.login,children:[Object(y.jsx)("img",{style:{width:"35px",height:"30px",paddingRight:"5px"},src:x,alt:"Spotify Icon"}),Object(y.jsx)("span",{style:{verticalAlign:"middle"},children:"Get Started"})]})}),Object(y.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",paddingTop:"50px"},children:[e.isSignOut?Object(y.jsx)("h3",{style:{color:"#C8C8C8"},children:"Successfully Signed Out"}):null,e.isNoData?Object(y.jsx)("h3",{style:{color:"#C8C8C8"},children:"Insufficient data in your spotify account."}):null]})]})})},v=n(82),S=n(18),w=n(57),A=n(58),C=n(228),k=A.a.nav(s||(s=Object(w.a)(["\n  background: #000;\n  height: 80px;\n  display: flex;\n  justify-content: space-between;\n  padding: 0.5rem calc((100vw - 1000px) / 2);\n  z-index: 10;\n"]))),T=Object(A.a)(v.b)(a||(a=Object(w.a)(["\n  color: #fff;\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  padding: 0 1rem;\n  height: 100%;\n  cursor: pointer;\n  &.active {\n    color: #1DB954;\n  }\n  &:hover {\n    color: #1DB954;\n    text-decoration: none;\n  }\n"]))),F=Object(A.a)(C.a)(i||(i=Object(w.a)(["\n  display: none;\n  color: #fff;\n  @media screen and (max-width: 768px) {\n    display: block;\n    position: absolute;\n    top: 0;\n    right: 0;\n    transform: translate(-100%, 75%);\n    font-size: 1.8rem;\n    cursor: pointer;\n  }\n"]))),I=A.a.div(o||(o=Object(w.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: -24px;\n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),D=A.a.nav(r||(r=Object(w.a)(["\n  display: flex;\n  align-items: center;\n  margin-right: 24px;\n  \n  @media screen and (max-width: 768px) {\n    display: none;\n  }\n"]))),_=Object(A.a)(v.b)(c||(c=Object(w.a)(["\n  border-radius: 4px;\n  background: #1DB954;\n  padding: 10px 22px;\n  color: #fff;\n  outline: none;\n  border: none;\n  cursor: pointer;\n  transition: all 0.2s ease-in-out;\n  text-decoration: none;\n  margin-left: 24px;\n  &:hover {\n    transition: all 0.2s ease-in-out;\n    background: #fff;\n    color: #010606;\n    text-decoration: none;\n  }\n"]))),R=function(){return Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(k,{children:[Object(y.jsxs)(T,{to:"/",children:[Object(y.jsx)("h1",{style:{fontSize:"30px",color:"white",display:"inline"},children:"Spotify"}),Object(y.jsx)("h1",{style:{fontSize:"30px",color:"#1DB954",display:"inline"},children:"Stats"})]}),Object(y.jsx)(F,{}),Object(y.jsxs)(I,{children:[Object(y.jsx)(T,{to:"/top-songs",activeStyle:!0,children:"Top Songs"}),Object(y.jsx)(T,{to:"/top-artists",activeStyle:!0,children:"Top Artists"}),Object(y.jsx)(T,{to:"/top-genres",activeStyle:!0,children:"Top Genres"}),Object(y.jsx)(T,{to:"/recommendations",activeStyle:!0,children:"Recommendations"}),Object(y.jsx)(T,{to:"/visuals",activeStyle:!0,children:"Visuals"})]}),Object(y.jsx)(D,{children:Object(y.jsx)(_,{to:"/sign-out",children:"Sign Out"})})]})})},N=function(e){return Object(y.jsx)("div",{style:{color:"#fff",width:"100%",background:"linear-gradient(#000000 0%, #0f6c30 40%, #1ed760 100%)",height:"100vh",margin:"auto",position:"absolute"},children:Object(y.jsxs)("div",{style:{display:"flex",fontFamily:"Montserrat, sans-serif",margin:"0rem",height:"25vh",justifyContent:"center",position:"relative",top:"50%",transform:"translateY(-50%)"},children:[Object(y.jsx)("div",{style:{width:"30vw",paddingRight:"50px",textAlign:"right"},children:Object(y.jsx)("img",{src:e.userImage,alt:"Profile",style:{background:"gray",width:"150px",height:"150px",borderRadius:"50%",border:"none"}})}),Object(y.jsxs)("div",{style:{marginLeft:"0%",marginTop:"3%",width:"30vw"},children:[Object(y.jsx)("h3",{children:e.userName}),Object(y.jsxs)("h3",{style:{color:"#C8C8C8"},children:["Followers - ",e.followers]})]})]})})},B=(n(150),function(e){var t={display:"flex",fontFamily:"Montserrat, sans-serif",margin:"0rem",minHeight:"25vh",justifyContent:"center",paddingTop:"20px",paddingBottom:"20px"},n={width:"30vw",paddingRight:"50px",textAlign:"right",position:"relative",display:"inline-flex"},s={width:"30vw",paddingRight:"50px",textAlign:"left",display:"flex",justifyContent:"center",alignContent:"center",flexDirection:"column"},a={background:"gray",width:"150px",height:"150px",borderRadius:"50%",backgroundColor:"black"},i={marginLeft:"auto",marginTop:"auto",marginBottom:"auto"},o={color:"#C8C8C8"};return Object(y.jsx)("div",{style:{color:"#fff",width:"100%",background:"linear-gradient(#000000 0%, #0f6c30 40%, #1ed760 100%)",alignItems:"center",justifyContent:"center",paddingTop:"70px",paddingBottom:"70px"},children:Object(h.a)(Array(10)).map((function(r,c){return Object(y.jsxs)("div",{style:t,children:[Object(y.jsx)("div",{style:n,children:Object(y.jsx)("div",{style:i,children:Object(y.jsx)("img",{src:e.topSongImages[c],alt:"artist",style:a})})}),Object(y.jsxs)("div",{style:s,children:[Object(y.jsx)("h3",{children:e.topSongNames[c]}),Object(y.jsxs)("h3",{style:o,children:["By ",e.topSongArtistName[c]]})]})]},c)}))})}),M=function(e){var t={display:"flex",fontFamily:"Montserrat, sans-serif",margin:"0rem",minHeight:"25vh",justifyContent:"center",paddingTop:"20px",paddingBottom:"20px"},n={width:"30vw",paddingRight:"50px",textAlign:"right",position:"relative",display:"inline-flex"},s={width:"30vw",paddingRight:"50px",textAlign:"left",display:"flex",justifyContent:"center",alignContent:"center",flexDirection:"column"},a={background:"gray",width:"150px",height:"150px",borderRadius:"50%"},i={marginLeft:"auto",marginTop:"auto",marginBottom:"auto"},o={color:"#C8C8C8"};return Object(y.jsx)("div",{style:{color:"#fff",width:"100%",background:"linear-gradient(#000000 0%, #0f6c30 40%, #1ed760 100%)",alignItems:"center",justifyContent:"center",paddingTop:"70px",paddingBottom:"70px"},children:Object(h.a)(Array(10)).map((function(r,c){return Object(y.jsxs)("div",{style:t,children:[Object(y.jsx)("div",{style:n,children:Object(y.jsx)("div",{style:i,children:Object(y.jsx)("img",{src:e.topArtistImages[c],alt:"artist",style:a})})}),Object(y.jsxs)("div",{style:s,children:[Object(y.jsx)("h3",{children:e.topArtistNames[c]}),Object(y.jsxs)("h3",{style:o,children:["Followers - ",e.topArtistFollowers[c]]})]})]},c)}))})},G=function(e){var t={display:"flex",fontFamily:"Montserrat, sans-serif",margin:"0rem",minHeight:"25vh",justifyContent:"center"},n={marginLeft:"0%",marginTop:"3%",width:"30vw",textAlign:"center"};return Object(y.jsx)("div",{style:{color:"#fff",width:"100%",background:"linear-gradient(#000000 0%, #0f6c30 40%, #1ed760 100%)",alignItems:"center",justifyContent:"center",paddingTop:"70px",paddingBottom:"70px"},children:Object(h.a)(Array(10)).map((function(s,a){return Object(y.jsx)("div",{style:t,children:Object(y.jsx)("div",{style:n,children:Object(y.jsx)("h3",{children:e.topGenres[a]})})},a)}))})},U=function(e){var t={display:"flex",fontFamily:"Montserrat, sans-serif",margin:"0rem",minHeight:"25vh",justifyContent:"center",paddingTop:"20px",paddingBottom:"20px"},n={width:"30vw",paddingRight:"50px",textAlign:"right",position:"relative",display:"inline-flex"},s={width:"30vw",paddingRight:"50px",textAlign:"left",display:"flex",justifyContent:"center",alignContent:"center",flexDirection:"column"},a={background:"gray",width:"150px",height:"150px",borderRadius:"50%",backgroundColor:"black"},i={marginLeft:"auto",marginTop:"auto",marginBottom:"auto"},o={color:"#C8C8C8"};return Object(y.jsx)("div",{style:{color:"#fff",width:"100%",background:"linear-gradient(#000000 0%, #0f6c30 40%, #1ed760 100%)",alignItems:"center",justifyContent:"center",paddingTop:"70px",paddingBottom:"70px"},children:Object(h.a)(Array(10)).map((function(r,c){return Object(y.jsxs)("div",{style:t,children:[Object(y.jsx)("div",{style:n,children:Object(y.jsx)("div",{style:i,children:Object(y.jsx)("img",{src:e.topRecommendationsImages[c],alt:"album",style:a})})}),Object(y.jsxs)("div",{style:s,children:[Object(y.jsx)("h3",{children:e.topRecommendations[c]}),Object(y.jsxs)("h3",{style:o,children:["By ",e.topRecommendationsArtistName[c]]})]})]},c)}))})},z=n(205),L=(n(247),n(415)),P=n(416),E=n(420),V=n(220),H=n(221),K=n(218),J=n(421),Y=n(230),q=n(224),Q=n(225),W=n(423),X=n(46),Z=n(140),$=n.n(Z),ee=function(e){var t=Object(l.useState)(!1),n=Object(g.a)(t,2),s=(n[0],n[1]),a=Object(l.useState)(!1),i=Object(g.a)(a,2),o=(i[0],i[1]),r=Object(l.useState)(!1),c=Object(g.a)(r,2),d=(c[0],c[1],Object(l.useState)([])),u=Object(g.a)(d,2),p=u[0],h=u[1],m=Object(l.useState)([]),j=Object(g.a)(m,2),f=(j[0],j[1]),b=Object(l.useState)([{subject:"Acousticness",A:0},{subject:"Danceability",A:0},{subject:"Energy",A:0},{subject:"Instrumentalness",A:0},{subject:"Liveness",A:0},{subject:"Valence",A:0},{subject:"Speechiness",A:0}]),x=Object(g.a)(b,2),O=x[0],v=x[1],S=[{subject:"Acousticness",A:0},{subject:"Danceability",A:0},{subject:"Energy",A:0},{subject:"Instrumentalness",A:0},{subject:"Liveness",A:0},{subject:"Valence",A:0},{subject:"Speechiness",A:0}],w=[{subject:"Acousticness",A:e.songFeatures.acousticness},{subject:"Danceability",A:e.songFeatures.danceability},{subject:"Energy",A:e.songFeatures.energy},{subject:"Instrumentalness",A:e.songFeatures.instrumentalness},{subject:"Liveness",A:e.songFeatures.liveness},{subject:"Valence",A:e.songFeatures.valence},{subject:"Speechiness",A:e.songFeatures.speechiness}],A=Object(l.useState)([{name:"largo",value:0,fill:"#581845"},{name:"adante",value:0,fill:"#900C3F"},{name:"moderato",value:0,fill:"#C70039"},{name:"allegro",value:0,fill:"#FF5733"},{name:"presto",value:0,fill:"#FFC300"}]),C=Object(g.a)(A,2),k=C[0],T=C[1],F=[{name:"largo",value:0,fill:"#581845"},{name:"adante",value:0,fill:"#900C3F"},{name:"moderato",value:0,fill:"#C70039"},{name:"allegro",value:0,fill:"#FF5733"},{name:"presto",value:0,fill:"#FFC300"}],I=[{name:"largo",value:e.tempo.largo,fill:"#581845"},{name:"adante",value:e.tempo.adante,fill:"#900C3F"},{name:"moderato",value:e.tempo.moderato,fill:"#C70039"},{name:"allegro",value:e.tempo.allegro,fill:"#FF5733"},{name:"presto",value:e.tempo.presto,fill:"#FFC300"}],D=Object(l.useState)([]),_=Object(g.a)(D,2),R=(_[0],_[1]),N=Object(l.useState)([]),B=Object(g.a)(N,2),M=(B[0],B[1]),G=[{name:"Artists",children:p}];Object(l.useEffect)((function(){if(null!==e.treeMapData){var t=[];for(var n in e.treeMapData)t.push({name:""+n,size:e.treeMapData[n]});h(t)}if(null!==e.songFeatures.timeSignatures){var s=[],a=[];for(var i in e.songFeatures.timeSignatures)s.push({name:""+i,value:e.songFeatures.timeSignatures[i]}),a.push({name:""+i,value:100});R(a),M(a),f(s)}}),[]);var U=Object(z.a)({width:"90vh",height:"90vh",margin:"auto",justifyContent:"center",alignItems:"center"},"height","90vh"),Z={paddingBottom:"20px"};Math.PI;return Object(y.jsx)("div",{className:"banner",children:Object(y.jsxs)("div",{className:"container banner-align",children:[Object(y.jsx)("div",{className:"banner-hero",children:Object(y.jsx)($.a,{onChange:function(e){v(e?w:S),s(e)},partialVisibility:!0,offset:{top:450},children:Object(y.jsxs)("div",{style:U,children:[Object(y.jsx)("h2",{style:{textAlign:"center"},children:"Features"}),Object(y.jsx)("h5",{style:{textAlign:"center",color:"#C8C8C8"},children:"Based on your top 50 songs."}),Object(y.jsx)(L.a,{width:"100%",height:"100%",children:Object(y.jsxs)(P.a,{cx:"50%",cy:"50%",outerRadius:"80%",data:O,children:[Object(y.jsx)(E.a,{}),Object(y.jsx)(V.a,{dataKey:"subject",stroke:"#fff"}),Object(y.jsx)(H.a,{angle:38.6,domain:[0,1]}),Object(y.jsx)(K.a,{name:"Features",dataKey:"A",stroke:"#fff",fill:"#fff",fillOpacity:.4})]})})]})})}),Object(y.jsx)("div",{className:"banner-hero",children:Object(y.jsx)($.a,{onChange:function(e){T(e?I:F),o(e)},partialVisibility:!0,offset:{top:450},children:Object(y.jsxs)("div",{style:U,children:[Object(y.jsxs)("div",{style:Z,children:[Object(y.jsx)("h2",{style:{textAlign:"center"},children:"Tempo"}),Object(y.jsx)("h5",{style:{textAlign:"center",color:"#C8C8C8"},children:"View your favorite tempos."})]}),Object(y.jsx)(L.a,{width:"100%",height:"80%",children:Object(y.jsxs)(J.a,{width:700,height:500,data:k,children:[Object(y.jsx)(Y.a,{dataKey:"value",fill:"#8884d8"}),Object(y.jsx)(q.a,{dataKey:"name",stroke:"white"}),Object(y.jsx)(Q.a,{stroke:"white"})]})})]})})}),Object(y.jsx)("div",{className:"banner-hero",children:Object(y.jsxs)("div",{style:U,children:[Object(y.jsxs)("div",{style:Z,children:[Object(y.jsx)("h2",{style:{textAlign:"center"},children:"Artists"}),Object(y.jsx)("h5",{style:{textAlign:"center",color:"#C8C8C8"},children:"See which artists produce your most listened to songs."})]}),Object(y.jsx)(L.a,{width:"100%",height:"80%",children:Object(y.jsx)(W.a,{width:700,height:500,data:G,dataKey:"size",ratio:4/3,stroke:"#fff",fill:"#8884d8",children:Object(y.jsx)(X.a,{separator:"",formatter:function(e,t,n){return n.payload.name+" : "+e+(e>1?" songs":" song")}})})})]})})]})})},te=n(74),ne=n.n(te),se={getUsersProfile:function(e,t){console.log("Getting Users Profile!!!");ne.a.get("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}).then((function(e){if(200===e.status)return e.data;throw e.status,new Error(e.status)})).then((function(t){e(t)})).catch((function(e){console.log(e),t()}))},getTopSongs:function(e,t){console.log("Getting Top Songs!!!");ne.a.get("https://api.spotify.com/v1/me/top/tracks?time_range=long_term&limit=100",{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}).then((function(e){if(200===e.status)return e.data;throw e.status,new Error(e.status)})).then((function(t){e(t)})).catch((function(e){console.log(e),t()}))},getTopArtists:function(e,t){console.log("Getting Top Artists!!!");ne.a.get("https://api.spotify.com/v1/me/top/artists?time_range=long_term&limit=100",{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}).then((function(e){if(200===e.status)return e.data;throw e.status,new Error(e.status)})).then((function(t){e(t)})).catch((function(e){console.log(e),t()}))},getRecommendations:function(e,t,n,s){console.log("Getting Top Recommendations!!!");var a=e.join(","),i=t.join(","),o="https://api.spotify.com/v1/recommendations?limit=10&seed_artists=".concat(a,"&seed_tracks=").concat(i);ne.a.get(o,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}).then((function(e){if(200===e.status)return e.data;throw e.status,new Error(e.status)})).then((function(e){n(e)})).catch((function(e){console.log(e),s()}))},getSongFeatures:function(e,t,n){console.log("Getting Song Features!!!");var s=e.join(","),a="https://api.spotify.com/v1/audio-features?ids=".concat(s);ne.a.get(a,{headers:{Authorization:"Bearer "+localStorage.getItem("accessToken")}}).then((function(e){if(200===e.status)return e.data;throw e.status,new Error(e.status)})).then((function(e){t(e)})).catch((function(e){console.log(e),n()}))}},ae=n.p+"static/media/default_image.84681b68.jpg",ie=(n(412),function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(m.a)(this,n);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).isSongUpdateDone=!1,e.isArtistUpdateDone=!1,e.state={visible:!0,accessToken:"",tokenType:"",expiresIn:"",data:{},isSignOut:!1,userName:"",followers:0,userImage:"",isDataRetrieved:!1,topArtistNames:[],topArtistImages:[],topArtistID:[],topArtistFollowers:[],topSongNames:[],topSongImages:[],topSongID:[],topSongArtistName:[],topGenres:[],topRecommendations:[],topRecommendationsImages:[],topRecommendationsArtistName:[],songFeatures:{},timeSignatures:{},tempo:{},treeMapData:{},isNoData:!1},e.handleLogin=function(){var e=["user-top-read","playlist-read-private"].join("%20");window.location="".concat("https://accounts.spotify.com/authorize","?client_id=").concat("f6914647e144472a9946eba5f87d9721","&response_type=").concat("token","&show_dialog=").concat("true","&redirect_uri=").concat("https://hrvojeperic.github.io/","&scope=").concat(e)},e.getParamsFromAuthentication=function(e){return e.substring(1).split("&").reduce((function(e,t){var n=t.split("="),s=Object(g.a)(n,2),a=s[0],i=s[1];return e[a]=i,e}),{})},e.handleSignout=function(){return e.setState({visible:!0,isSignOut:!0}),null},e.showUserProfile=function(){se.getUsersProfile(e._showUserProfileCallback,e._errorCallback)},e._showUserProfileCallback=function(t){var n=t.display_name,s=t.followers.total,a=ae;0!==t.images.length&&(a=t.images[0].href),e.setState({userName:n,followers:s,userImage:a})},e.showTopArtists=function(){se.getTopArtists(e._showTopArtistsCallback,e._errorCallback)},e._showTopArtistsCallback=function(t){var n=[],s=[],a=[],i=[],o=[];if(0===t.items.length)e.setState({isNoData:!0});else{for(var r=0;r<t.items.length;r++)null!=t.items[r].name?n.push(t.items[r].name):n.push("Unknown"),null!=t.items[r].images&&s.push(t.items[r].images[0].url),a.push(t.items[r].id),i.push.apply(i,Object(h.a)(t.items[r].genres)),o.push(t.items[r].followers.total);var c=e.calculateTopGenres(i);e.setState({topArtistNames:n,topArtistImages:s,topArtistID:a,topArtistFollowers:o,topGenres:c},(function(){e.isArtistUpdateDone=!0,e.showRecommendations()}))}},e.showTopSongs=function(){se.getTopSongs(e._showTopSongsCallback,e._errorCallback)},e._showTopSongsCallback=function(t){var n=[],s=[],a=[],i=[];if(0===t.items.length)e.setState({isNoData:!0});else{for(var o=0;o<t.items.length;o++)null!=t.items[o].name?n.push(t.items[o].name):n.push("Unknown"),null!=t.items[o].album.images&&s.push(t.items[o].album.images[0].url),a.push(t.items[o].id),i.push(t.items[o].album.artists[0].name);e.setState({topSongNames:n,topSongImages:s,topSongID:a,topSongArtistName:i},(function(){e.isSongUpdateDone=!0,e.showRecommendations(),e.setTreeMapData(e.state.topSongArtistName)})),se.getSongFeatures(e.state.topSongID,e._showTopSongFeaturesCallback,e._errorCallback)}},e._showTopSongFeaturesCallback=function(t){for(var n=0,s=0,a=0,i=0,o=0,r=0,c=0,l=[],d=[],u=[],p=t.audio_features.length,h=0;h<p;h++)n+=t.audio_features[h].acousticness,s+=t.audio_features[h].danceability,a+=t.audio_features[h].energy,i+=t.audio_features[h].instrumentalness,o+=t.audio_features[h].liveness,r+=t.audio_features[h].valence,c+=t.audio_features[h].speechiness,l.push(t.audio_features[h].duration_ms),d.push(t.audio_features[h].time_signature),u.push(t.audio_features[h].tempo);n/=p,s/=p,a/=p,i/=p,o/=p,r/=p,c/=p;for(var g=0,m=l[0],j=l[0],f=0;f<l.length;f++)m<l[f]&&(m=l[f]),j>l[f]&&(j=l[f]),g+=l[f];m/=6e4,j/=6e4;for(var b=(g/=6e4)/l.length,x={},y=0,O=d.length;y<O;y++)x[d[y]]=(x[d[y]]||0)+1;for(var v={largo:0,adante:0,moderato:0,allegro:0,presto:0},S=0;S<u.length;S++)u[S]<=76?v.largo++:u[S]<=108?v.adante++:u[S]<=120?v.moderato++:u[S]<=168?v.allegro++:v.presto++;var w={acousticness:n,danceability:s,energy:a,instrumentalness:i,liveness:o,valence:r,speechiness:c,minDuration:j,maxDuration:m,avgDuration:b,timeSignatures:x};e.setState({songFeatures:w,tempo:v})},e.calculateTopGenres=function(e){for(var t={},n=0,s=e.length;n<s;n++)t[e[n]]=(t[e[n]]||0)+1;console.log(e);var a=[];return!(10>Object.keys(t).length)&&(Object.keys(t).sort((function(e,n){return t[n]-t[e]})).forEach((function(e,t){t<10&&a.push(e)})),console.log(a),a)},e.showRecommendations=function(){if(e.isSongUpdateDone&&e.isArtistUpdateDone){for(var t=[],n=[],s=0;s<e.state.topArtistID.length&&s<2;s++)t.push(e.state.topArtistID[s]);for(var a=0;a<e.state.topSongID.length&&a<3;a++)n.push(e.state.topSongID[a]);se.getRecommendations(t,n,e._showRecommendationsCallback,e._errorCallback)}},e._showRecommendationsCallback=function(t){var n=[],s=[],a=[];if(0===t.tracks.length)e.setState({isNoData:!0});else{for(var i=0;i<t.tracks.length;i++)n.push(t.tracks[i].name),s.push(t.tracks[i].album.images[0].url),a.push(t.tracks[i].artists[0].name);e.setState({topRecommendations:n,topRecommendationsImages:s,topRecommendationsArtistName:a})}},e._errorCallback=function(){},e.setTreeMapData=function(t){for(var n={},s=0,a=t.length;s<a;s++)n[t[s]]=(n[t[s]]||0)+1;e.setState({treeMapData:n})},e.handleHome=function(){return!1===e.state.isDataRetrieved&&(e.setState({isDataRetrieved:!0}),e.showUserProfile(),e.showTopSongs(),e.showTopArtists(),e.showRecommendations()),Object(y.jsx)(N,{userName:e.state.userName,followers:e.state.followers,userImage:e.state.userImage})},e.handleTopSongs=function(){return Object(y.jsx)(B,{topSongNames:e.state.topSongNames,topSongImages:e.state.topSongImages,topSongArtistName:e.state.topSongArtistName})},e.handleTopArtists=function(){return Object(y.jsx)(M,{topArtistNames:e.state.topArtistNames,topArtistImages:e.state.topArtistImages,topArtistFollowers:e.state.topArtistFollowers})},e.handleTopGenres=function(){return Object(y.jsx)(G,{topGenres:e.state.topGenres})},e.handleRecommendations=function(){return Object(y.jsx)(U,{topRecommendations:e.state.topRecommendations,topRecommendationsImages:e.state.topRecommendationsImages,topRecommendationsArtistName:e.state.topRecommendationsArtistName})},e.handleVisuals=function(){return Object(y.jsx)(ee,{songFeatures:e.state.songFeatures,tempo:null!=e.state.tempo?e.state.tempo:{},treeMapData:e.state.treeMapData})},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){if(window.location.hash){this.setState({visible:!1});var e=this.getParamsFromAuthentication(window.location.hash);localStorage.clear(),this.setState({accessToken:e.access_token,tokenType:e.token_type,expiresIn:e.expires_in}),localStorage.setItem("accessToken",e.access_token),localStorage.setItem("tokenType",e.token_type),localStorage.setItem("expiresIn",e.expires_in)}}},{key:"render",value:function(){var e=this;return Object(y.jsx)("div",{children:this.state.visible||this.state.isNoData?this.state.isNoData?Object(y.jsx)(O,{login:function(){return e.handleLogin()},isNoData:this.state.isNoData}):Object(y.jsx)(O,{login:function(){return e.handleLogin()},isSignOut:this.state.isSignOut}):Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)(v.a,{children:[Object(y.jsx)(R,{}),Object(y.jsx)(S.c,{children:Object(y.jsx)(S.a,{path:"/",exact:!0,component:function(){return e.handleHome()}})}),Object(y.jsx)(S.c,{children:Object(y.jsx)(S.a,{path:"/top-songs",exact:!0,component:function(){return e.handleTopSongs()}})}),Object(y.jsx)(S.c,{children:Object(y.jsx)(S.a,{path:"/top-artists",exact:!0,component:function(){return e.handleTopArtists()}})}),Object(y.jsx)(S.c,{children:Object(y.jsx)(S.a,{path:"/top-genres",exact:!0,component:function(){return e.handleTopGenres()}})}),Object(y.jsx)(S.c,{children:Object(y.jsx)(S.a,{path:"/recommendations",exact:!0,component:function(){return e.handleRecommendations()}})}),Object(y.jsx)(S.c,{children:Object(y.jsx)(S.a,{path:"/visuals",exact:!0,component:function(){return e.handleVisuals()}})}),Object(y.jsx)(S.c,{children:Object(y.jsx)(S.a,{path:"/sign-out",exact:!0,component:function(){return e.handleSignout()}})})]})})})}}]),n}(l.Component));var oe=function(){return Object(y.jsx)("div",{children:Object(y.jsx)(ie,{})})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,424)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),s(e),a(e),i(e),o(e)}))};p.a.render(Object(y.jsx)(d.a.StrictMode,{children:Object(y.jsx)(oe,{})}),document.getElementById("root")),re()}},[[413,1,2]]]);
//# sourceMappingURL=main.a65f46f3.chunk.js.map